{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n// import { showLoader } from \"./render-functions\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '43014445-2d3e2fe82a6f953d204684055';\n\nexport async function getUrl(query, page) {\n    try {\n        const res = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                perPage: 15,\n                page,\n            }\n        })\n        return res.data\n    } catch (err) {\n        console.error(\"Error:\", err);\n        throw err;\n    }\n}\n\n","import { refs } from \"../main\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n})\n\n\nfunction articleTemplate(obj) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = obj;\nreturn `<li class=\"photos-list-item\">\n  <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n  <img loading=\"lazy\" class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n  </a>\n  <ul class=\"photo-information-container\">\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n  </ul>\n  </li>`\n}\n\nfunction articlesTemplate(arr) {\n    if (arr.length === 0) {\n        iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    }\nreturn arr.map(articleTemplate).join(\"\")\n    \n  \n}\n\nexport function renderArticle(arr) {\n    const marcup = articlesTemplate(arr)\n    refs.gallery.insertAdjacentHTML(\"beforeend\", marcup)\n    lightbox.refresh();\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// import { showLoader } from './js/render-functions';\nimport { getUrl } from \"./js/pixabay-api\";\nimport { renderArticle, lightbox } from \"./js/render-functions\";\n\nexport const refs = {\n    form: document.querySelector(\".form\"),\n    gallery: document.querySelector(\".gallery\"),\n    btnLoadMore: document.querySelector(\".btn-footer-form\"),\n    loader: document.querySelector(\".loader\")\n}\n\nfunction showLoader() {\n    refs.loader.classList.remove(\"is-hidden\")\n}\n\nexport function hideLoader() {\n    refs.loader.classList.add(\"is-hidden\")\n}\n\nfunction showLoadMore() {\n    refs.btnLoadMore.classList.remove(\"is-hidden\")\n}\n\nfunction hideLoadMore() {\n    refs.btnLoadMore.classList.add(\"is-hidden\")\n}\n\n\n\n// refs.loader.style.display = 'none';\n\n// export const showLoader = () => {\n//     loader.style.display = 'flex';\n    \n// };\n// const hideLoader = () => {\n//     loader.style.display = 'none';\n// };\n\n\nlet query;\nlet perPage = 1;\nlet maxPage = 0;\nconst perSize = 15;\n\nrefs.form.addEventListener(\"submit\", handleSubmit);\n\nasync function  handleSubmit(e) {\n    e.preventDefault();\n    hideLoadMore();\n    showLoader();\n    query = e.target.elements.query.value.trim();\n    refs.gallery.innerHTML = \"\";\n    perPage = 1\n    \n    if (!query) {\n        hideLoader()\n        iziToast.error({\n          message: 'Please complete the field!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n            position: 'topRight',\n        \n        })\n        return\n    }\n\n    const data = await getUrl(query, perPage)\n\n    maxPage = Math.ceil(data.totalHits / perSize)\n    renderArticle(data.hits)\n    checkLoadStatus();\n    hideLoader();\n    e.target.reset();\n    \n}\n\nrefs.btnLoadMore.addEventListener(\"click\", handleLoadClick);\n\nasync function handleLoadClick() {\n    showLoader()\n    perPage += 1;\n        const data = await getUrl(query, perPage)\n    renderArticle(data.hits)\n    // checkLoadStatus();\n}\n\n\n\n\n\nfunction checkLoadStatus() {\n    if (perPage >= maxPage) {\n        hideLoadMore()\n    } else {\n        showLoadMore()\n    }\n}"],"names":["BASE_URL","API_KEY","getUrl","query","page","axios","err","lightbox","SimpleLightbox","articleTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","articlesTemplate","arr","iziToast","renderArticle","marcup","refs","showLoader","hideLoader","showLoadMore","hideLoadMore","perPage","maxPage","perSize","handleSubmit","e","data","checkLoadStatus","handleLoadClick"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAOC,EAAOC,EAAM,CACtC,GAAI,CAYA,OAXY,MAAMC,EAAM,IAAIL,EAAU,CAClC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,QAAS,GACT,KAAAC,CACH,CACb,CAAS,GACU,IACd,OAAQE,EAAK,CACV,cAAQ,MAAM,SAAUA,CAAG,EACrBA,CACT,CACL,CClBO,MAAMC,EAAW,IAAIC,EAAe,aAAc,CACrD,aAAc,IACd,aAAc,KAClB,CAAC,EAGD,SAASC,EAAgBC,EAAK,CAC1B,KAAM,CAAC,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAIP,EACnF,MAAO;AAAA,sCAC+BC,CAAa;AAAA,2CACRC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,0FAGqBC,CAAK;AAAA,0FACLC,CAAK;AAAA,6FACFC,CAAQ;AAAA,8FACPC,CAAS;AAAA;AAAA,QAGvG,CAEA,SAASC,EAAiBC,EAAK,CAC3B,OAAIA,EAAI,SAAW,GACfC,EAAS,MAAM,CACjB,QAAS,2EACT,MAAO,OACP,iBAAkB,UAClB,MAAO,UACP,SAAU,UAChB,CAAK,EAEED,EAAI,IAAIV,CAAe,EAAE,KAAK,EAAE,CAGvC,CAEO,SAASY,EAAcF,EAAK,CAC/B,MAAMG,EAASJ,EAAiBC,CAAG,EACnCI,EAAK,QAAQ,mBAAmB,YAAaD,CAAM,EACnDf,EAAS,QAAO,CACpB,CCvCO,MAAMgB,EAAO,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,kBAAkB,EACtD,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEA,SAASC,GAAa,CAClBD,EAAK,OAAO,UAAU,OAAO,WAAW,CAC5C,CAEO,SAASE,GAAa,CACzBF,EAAK,OAAO,UAAU,IAAI,WAAW,CACzC,CAEA,SAASG,GAAe,CACpBH,EAAK,YAAY,UAAU,OAAO,WAAW,CACjD,CAEA,SAASI,GAAe,CACpBJ,EAAK,YAAY,UAAU,IAAI,WAAW,CAC9C,CAeA,IAAIpB,EACAyB,EAAU,EACVC,EAAU,EACd,MAAMC,EAAU,GAEhBP,EAAK,KAAK,iBAAiB,SAAUQ,CAAY,EAEjD,eAAgBA,EAAaC,EAAG,CAQ5B,GAPAA,EAAE,eAAc,EAChBL,IACAH,IACArB,EAAQ6B,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCT,EAAK,QAAQ,UAAY,GACzBK,EAAU,EAEN,CAACzB,EAAO,CACRsB,EAAY,EACZL,EAAS,MAAM,CACb,QAAS,6BACX,MAAO,OACP,iBAAkB,UAClB,MAAO,UACH,SAAU,UAEtB,CAAS,EACD,MACH,CAED,MAAMa,EAAO,MAAM/B,EAAOC,EAAOyB,CAAO,EAExCC,EAAU,KAAK,KAAKI,EAAK,UAAYH,CAAO,EAC5CT,EAAcY,EAAK,IAAI,EACvBC,IACAT,IACAO,EAAE,OAAO,OAEb,CAEAT,EAAK,YAAY,iBAAiB,QAASY,CAAe,EAE1D,eAAeA,GAAkB,CAC7BX,EAAY,EACZI,GAAW,EACP,MAAMK,EAAO,MAAM/B,EAAOC,EAAOyB,CAAO,EAC5CP,EAAcY,EAAK,IAAI,CAE3B,CAMA,SAASC,GAAkB,CACnBN,GAAWC,EACXF,EAAc,EAEdD,EAAc,CAEtB"}