{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '43014445-2d3e2fe82a6f953d204684055';\n\nexport async function getUrl(query, page) {\n    try {\n        const res = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 15,\n                page,\n            }\n        })\n        return res.data\n    } catch (err) {\n        console.error(\"Error:\", err);\n        throw err;\n    }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {gallery} from '../main.js'\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n})\n\n\nfunction articleTemplate(obj) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = obj;\nreturn `<li class=\"photos-list-item\">\n  <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n  <img loading=\"lazy\" class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n  </a>\n  <ul class=\"photo-information-container\">\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n  </ul>\n  </li>`\n}\n\nfunction articlesTemplate(arr) {\n    // if (arr.length === 0) {\n    //     iziToast.error({\n    //   message: 'Sorry, there are no images matching your search query. Please try again!',\n    //   theme: 'dark',\n    //   progressBarColor: '#FFFFFF',\n    //   color: '#EF4040',\n    //   position: 'topRight',\n    // });\n    // }\nreturn arr.map(articleTemplate).join(\"\")  \n}\n\nexport function renderArticle(arr) {\n    const marcup = articlesTemplate(arr)\n    gallery.insertAdjacentHTML(\"beforeend\", marcup)\n    lightbox.refresh();\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// import { showLoader } from './js/render-functions';\nimport { getUrl } from \"./js/pixabay-api\";\nimport { renderArticle, lightbox } from \"./js/render-functions\";\n\n\nconst form = document.querySelector(\".form\");\nexport const gallery = document.querySelector(\".gallery\");\nconst btnLoadMore = document.querySelector(\".btn-footer-form\");\nconst loader = document.querySelector(\".loader\");\n\n\nfunction showLoader() {\n    loader.classList.remove(\"is-hidden\")\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"is-hidden\")\n}\n\nfunction showLoadMore() {\n    btnLoadMore.classList.remove(\"is-hidden\")\n}\n\nfunction hideLoadMore() {\n    btnLoadMore.classList.add(\"is-hidden\")\n}\n\n\nlet query;\nlet perPage = 1;\nlet maxPage = 0;\nconst perSize = 15;\n\nform.addEventListener(\"submit\", handleSubmit);\n\nasync function  handleSubmit(e) {\n    e.preventDefault();\n    hideLoadMore();\n    showLoader();\n    gallery.innerHTML = \"\";\n     perPage = 1\n    query = e.target.elements.query.value.trim();\n    \n    if (!query) {\n        iziToast.error({\n          message: 'Please complete the field!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n            position: 'topRight',\n        \n        })\n        hideLoader()\n        return\n    }\n\n    try {\n        const data = await getUrl(query, perPage);\n        // showLoader()\n        maxPage = Math.ceil(data.totalHits / perSize);\n        if (data.hits.length === 0) {\n             iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n        position: 'topRight',\n      });\n        } else {\n            renderArticle(data.hits);\n            checkLoadStatus();\n        }\n    } catch (err) {\n        console.log(err);\n            iziToast.error({\n      message: 'Sorry, an error occurred while loading. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    }\n   \n    hideLoader();\n    e.target.reset();\n    \n}\n\nbtnLoadMore.addEventListener(\"click\", handleLoadClick);\n\nasync function handleLoadClick() {\n    perPage += 1;\n    hideLoadMore()\n    showLoader();\n\n    try {\n        const data = await getUrl(query, perPage)\n    renderArticle(data.hits)\n    } catch (err) {\n        console.log(err);\n            iziToast.error({\n      message: 'Sorry, an error occurred while loading. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    } \n    myScroll();\n    checkLoadStatus();\n    hideLoader();\n}\n\n function checkLoadStatus() {\n    if (perPage >= maxPage) {\n        hideLoadMore()\n        iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    } else {\n        showLoadMore()\n    }\n}\n\nfunction myScroll() {\n    const height = gallery.firstChild.getBoundingClientRect().height\n    scrollBy({\n        top: height * 3,\n        behavior: 'smooth',\n    })\n}"],"names":["BASE_URL","API_KEY","getUrl","query","page","axios","err","lightbox","SimpleLightbox","articleTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","articlesTemplate","arr","renderArticle","marcup","gallery","form","btnLoadMore","loader","showLoader","hideLoader","showLoadMore","hideLoadMore","perPage","maxPage","perSize","handleSubmit","iziToast","data","checkLoadStatus","handleLoadClick","myScroll","height"],"mappings":"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"}