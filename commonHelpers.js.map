{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '43014445-2d3e2fe82a6f953d204684055';\n\nexport async function getUrl(query, page) {\n    try {\n        const res = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: 15,\n                page,\n            }\n        })\n        return res.data\n    } catch (err) {\n        console.error(\"Error:\", err);\n        throw err;\n    }\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport {gallery} from '../main.js'\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n})\n\n\nfunction articleTemplate(obj) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = obj;\nreturn `<li class=\"photos-list-item\">\n  <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n  <img loading=\"lazy\" class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n  </a>\n  <ul class=\"photo-information-container\">\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n  </ul>\n  </li>`\n}\n\nfunction articlesTemplate(arr) {\n    if (arr.length === 0) {\n        iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    }\nreturn arr.map(articleTemplate).join(\"\")\n    \n  \n}\n\nexport function renderArticle(arr) {\n    const marcup = articlesTemplate(arr)\n    gallery.insertAdjacentHTML(\"beforeend\", marcup)\n    lightbox.refresh();\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// import { showLoader } from './js/render-functions';\nimport { getUrl } from \"./js/pixabay-api\";\nimport { renderArticle, lightbox } from \"./js/render-functions\";\n\n\nconst form = document.querySelector(\".form\");\nexport const gallery = document.querySelector(\".gallery\");\nconst btnLoadMore = document.querySelector(\".btn-footer-form\");\nconst loader = document.querySelector(\".loader\");\n\n\nfunction showLoader() {\n    loader.classList.remove(\"is-hidden\")\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"is-hidden\")\n}\n\nfunction showLoadMore() {\n    btnLoadMore.classList.remove(\"is-hidden\")\n}\n\nfunction hideLoadMore() {\n    btnLoadMore.classList.add(\"is-hidden\")\n}\n\n\nlet query;\nlet perPage = 1;\nlet maxPage = 0;\nconst perSize = 15;\n\nform.addEventListener(\"submit\", handleSubmit);\n\nasync function  handleSubmit(e) {\n    e.preventDefault();\n\n    query = e.target.elements.query.value.trim();\n    // hideLoadMore();\n    \n    gallery.innerHTML = \"\";\n    perPage = 1\n    \n    if (!query) {\n        // hideLoader()\n        iziToast.error({\n          message: 'Please complete the field!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n            position: 'topRight',\n        \n        })\n        return\n    }\n\n    try {\n        showLoader()\n        const data = await getUrl(query, perPage);\n        maxPage = Math.ceil(data.totalHits / perSize);\n        renderArticle(data.hits);\n    } catch (err) {\n        console.log(err);\n    }\n   \n    hideLoader();\n    checkLoadStatus();\n    e.target.reset();\n    \n}\n\nbtnLoadMore.addEventListener(\"click\", handleLoadClick);\n\nasync function handleLoadClick() {\n    perPage += 1;\n    showLoader();\n    \n    try {\n        const data = await getUrl(query, perPage)\n    renderArticle(data.hits)\n    } catch (err) {\n        console.log(err);\n    } \n    myScroll();\n    checkLoadStatus();\n    hideLoader();\n}\n\nfunction checkLoadStatus() {\n    if (perPage >= maxPage) {\n        hideLoadMore()\n        iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    } else {\n        showLoadMore()\n    }\n}\n\nfunction myScroll() {\n    const height = gallery.firstChild.getBoundingClientRect().height\n    scrollBy({\n        top: height * 3,\n        behavior: 'smooth',\n    })\n}"],"names":["BASE_URL","API_KEY","getUrl","query","page","axios","err","lightbox","SimpleLightbox","articleTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","articlesTemplate","arr","iziToast","renderArticle","marcup","gallery","form","btnLoadMore","loader","showLoader","hideLoader","showLoadMore","hideLoadMore","perPage","maxPage","perSize","handleSubmit","data","checkLoadStatus","handleLoadClick","myScroll","height"],"mappings":"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"}