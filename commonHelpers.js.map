{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import { refs } from \"../main\";\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n})\n// import (refs)\nfunction articleTemplate(obj) {\n    const {largeImageURL, webformatURL, tags, likes, views, comments, downloads} = obj;\nreturn `<li class=\"photos-list-item\">\n  <a class=\"photos-list-link\" href=\"${largeImageURL}\">\n  <img loading=\"lazy\" class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n  </a>\n  <ul class=\"photo-information-container\">\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Likes</span></br>${likes}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Views</span></br>${views}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Comments</span></br>${comments}</p></li>\n  <li class=\"item-photo-information-container\"><p><span class=\"accent\">Downloads</span></br>${downloads}</p></li>\n  </ul>\n  </li>`\n}\n\nfunction articlesTemplate(arr) {\n    if (arr.length === 0) {\n        iziToast.error({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    }\nreturn arr.map(articleTemplate).join(\"\")\n    \n  \n}\n\nexport function renderArticle(arr) {\n    const marcup = articlesTemplate(arr)\n    refs.gallery.insertAdjacentHTML(\"beforeend\", marcup)\n    lightbox.refresh();\n}\n\nrefs.loader.style.display = 'none';\n\nexport const showLoader = () => {\n    loader.style.display = 'flex';\n    \n};\nconst hideLoader = () => {\n    loader.style.display = 'none';\n};\n","import axios from \"axios\";\nimport { showLoader } from \"./render-functions\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = '43014445-2d3e2fe82a6f953d204684055';\n\nexport async function getUrl(query, page,) {\n    try {\n        const res = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                perPage: 15,\n                page,\n            }\n        })\n        return res.data\n    } catch (err) {\n        console.error(\"Error:\", err);\n        throw err;\n    }\n}\n\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { showLoader } from './js/render-functions';\nimport { getUrl } from \"./js/pixabay-api\";\nimport { renderArticle, lightbox } from \"./js/render-functions\";\n\nexport const refs = {\n    form: document.querySelector(\".form\"),\n    gallery: document.querySelector(\".gallery\"),\n    btnLoadMore: document.querySelector(\".btn-footer-form\"),\n    loader: document.querySelector(\".loader\")\n}\n\nlet query;\nlet perPage = 1;\nlet maxPage = 0;\nconst perSize = 15;\n\nrefs.form.addEventListener(\"submit\", handleSubmit);\n\nasync function  handleSubmit(e) {\n    e.preventDefault();\n    query = e.target.elements.query.value.trim();\n    refs.gallery.innerHTML = \"\";\n    perPage = 1\n    \n    if (!query) {\n        iziToast.error({\n          message: 'Please complete the field!',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n            position: 'topRight',\n        \n        })\n        return\n    }\n\n    const data = await getUrl(query, perPage)\n\n    maxPage = Math.ceil(data.totalHits / perSize)\n    renderArticle(data.hits)\n    checkLoadStatus();\n    e.target.reset();\n}\n\nrefs.btnLoadMore.addEventListener(\"click\", handleLoadClick);\n\nasync function handleLoadClick() {\n    perPage += 1;\n        const data = await getUrl(query, perPage)\n    renderArticle(data.hits)\n    // checkLoadStatus();\n}\n\n\n\nfunction showLoadMore() {\n    refs.btnLoadMore.classList.remove(\"hidden\")\n}\n\nfunction hideLoadMore() {\n    refs.btnLoadMore.classList.add(\"hidden\")\n}\n\nfunction checkLoadStatus() {\n    if (perPage >= maxPage) {\n        hideLoadMore()\n    } else {\n        showLoadMore()\n    }\n}"],"names":["lightbox","SimpleLightbox","articleTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","articlesTemplate","arr","iziToast","renderArticle","marcup","refs","BASE_URL","API_KEY","getUrl","query","page","axios","err","perPage","maxPage","perSize","handleSubmit","e","data","checkLoadStatus","handleLoadClick","showLoadMore","hideLoadMore"],"mappings":"owBAMO,MAAMA,EAAW,IAAIC,EAAe,aAAc,CACrD,aAAc,IACd,aAAc,KAClB,CAAC,EAED,SAASC,EAAgBC,EAAK,CAC1B,KAAM,CAAC,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,EAAIP,EACnF,MAAO;AAAA,sCAC+BC,CAAa;AAAA,2CACRC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,0FAGqBC,CAAK;AAAA,0FACLC,CAAK;AAAA,6FACFC,CAAQ;AAAA,8FACPC,CAAS;AAAA;AAAA,QAGvG,CAEA,SAASC,EAAiBC,EAAK,CAC3B,OAAIA,EAAI,SAAW,GACfC,EAAS,MAAM,CACjB,QAAS,2EACT,MAAO,OACP,iBAAkB,UAClB,MAAO,UACP,SAAU,UAChB,CAAK,EAEED,EAAI,IAAIV,CAAe,EAAE,KAAK,EAAE,CAGvC,CAEO,SAASY,EAAcF,EAAK,CAC/B,MAAMG,EAASJ,EAAiBC,CAAG,EACnCI,EAAK,QAAQ,mBAAmB,YAAaD,CAAM,EACnDf,EAAS,QAAO,CACpB,CAEAgB,EAAK,OAAO,MAAM,QAAU,OC5C5B,MAAMC,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAOC,EAAOC,EAAO,CACvC,GAAI,CAYA,OAXY,MAAMC,EAAM,IAAIL,EAAU,CAClC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,QAAS,GACT,KAAAC,CACH,CACb,CAAS,GACU,IACd,OAAQE,EAAK,CACV,cAAQ,MAAM,SAAUA,CAAG,EACrBA,CACT,CACL,CCjBO,MAAMP,EAAO,CAChB,KAAM,SAAS,cAAc,OAAO,EACpC,QAAS,SAAS,cAAc,UAAU,EAC1C,YAAa,SAAS,cAAc,kBAAkB,EACtD,OAAQ,SAAS,cAAc,SAAS,CAC5C,EAEA,IAAII,EACAI,EAAU,EACVC,EAAU,EACd,MAAMC,EAAU,GAEhBV,EAAK,KAAK,iBAAiB,SAAUW,CAAY,EAEjD,eAAgBA,EAAaC,EAAG,CAM5B,GALAA,EAAE,eAAc,EAChBR,EAAQQ,EAAE,OAAO,SAAS,MAAM,MAAM,OACtCZ,EAAK,QAAQ,UAAY,GACzBQ,EAAU,EAEN,CAACJ,EAAO,CACRP,EAAS,MAAM,CACb,QAAS,6BACX,MAAO,OACP,iBAAkB,UAClB,MAAO,UACH,SAAU,UAEtB,CAAS,EACD,MACH,CAED,MAAMgB,EAAO,MAAMV,EAAOC,EAAOI,CAAO,EAExCC,EAAU,KAAK,KAAKI,EAAK,UAAYH,CAAO,EAC5CZ,EAAce,EAAK,IAAI,EACvBC,IACAF,EAAE,OAAO,OACb,CAEAZ,EAAK,YAAY,iBAAiB,QAASe,CAAe,EAE1D,eAAeA,GAAkB,CAC7BP,GAAW,EACP,MAAMK,EAAO,MAAMV,EAAOC,EAAOI,CAAO,EAC5CV,EAAce,EAAK,IAAI,CAE3B,CAIA,SAASG,GAAe,CACpBhB,EAAK,YAAY,UAAU,OAAO,QAAQ,CAC9C,CAEA,SAASiB,GAAe,CACpBjB,EAAK,YAAY,UAAU,IAAI,QAAQ,CAC3C,CAEA,SAASc,GAAkB,CACnBN,GAAWC,EACXQ,EAAc,EAEdD,EAAc,CAEtB"}